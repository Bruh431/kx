political_actions = {
	AOG_agreement_with_QIE = {
		allowed = { original_tag = AOG }
		available = {
			is_neighbor_of = QIE
			QIE = { 
				OR = {
					has_country_flag = wu_intervenes_proLEP 
					has_country_flag = QIE_coup_phase1
				}
			}
			has_completed_focus = AOG_securing_our_grip
		}
		visible = {
			original_tag = AOG
		}
		days_remove = 30
		fire_only_once = yes
		cost = 100
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AOG_give_guns_to_lep"
			QIE = { add_ideas = QIE_AOG_INFLUENCE_1 }
		}
	}
	AOG_agreement_with_QIE_2 = {
		allowed = { original_tag = AOG }
		available = {
			is_neighbor_of = QIE
			QIE = { 
				has_idea = QIE_AOG_INFLUENCE_1
			}
		}
		visible = {
			original_tag = AOG
			AND = {
				is_neighbor_of = QIE
				QIE = { 
					has_idea = QIE_AOG_INFLUENCE_1
				}
			}
		}
		days_remove = 30
		fire_only_once = yes
		cost = 100
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AOG_give_guns_to_lep"
			QIE = {
				swap_ideas = {
					remove_idea = QIE_AOG_INFLUENCE_1
					add_idea = QIE_AOG_INFLUENCE_2
				}
			}
		}
	}
	AOG_agreement_with_QIE_3 = {
		allowed = { original_tag = AOG }
		available = {
			is_neighbor_of = QIE
			QIE = { has_idea = QIE_AOG_INFLUENCE_2 }
		}
		visible = {
			original_tag = AOG
			AND = {
				is_neighbor_of = QIE
				QIE = { 
					has_idea = QIE_AOG_INFLUENCE_2
				}
			}
		}
		days_remove = 30
		fire_only_once = yes
		cost = 100
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AOG_give_guns_to_lep"
			QIE = {
				country_event = allgost.14
			}
		}
	}
	AOG_agreement_with_QIE_4 = {
		allowed = {
			original_tag = AOG
		}
		visible = {
			original_tag = AOG
			is_neighbor_of = QIE
			QIE = { 
				has_idea = QIE_AOG_INFLUENCE_2
				has_country_flag = AOG_QIE
				is_subject_of = AOG
			}
		}
		days_remove = 30
		fire_only_once = yes
		cost = 100
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AOG_give_guns_to_lep"
			QIE = {
				country_event = allgost.15
			}
		}
	}
	AOG_fading_falkenhausen = {
		icon = revolt
		allowed = {
			OR = {
				tag = GER
				tag = AOG
				tag = GEA
				is_chinese_tag = yes
			}
		}
		activation = {
			OR = {
				AOG = {
					exists = yes
					NOT = { has_war_with = JAP }
					has_capitulated = yes
					any_enemy_country = {
						custom_trigger_tooltip = {
							tooltip = AOG_china_tag
							is_chinese_tag = yes
						}
					}
					all_owned_state = {
						NOT = {
							is_controlled_by = AOG
						}
					}
				}
				GER = {
					exists = yes
					NOT = { has_war_with = JAP }
					any_enemy_country = {
						custom_trigger_tooltip = {
							tooltip = AOG_china_tag
							is_chinese_tag = yes
						}
					}
				}
			}
			NOT = {
				any_state = {
					controller = {
						is_in_faction_with = GER
					}
					OR = {
						is_claimed_by = QIE
						is_claimed_by = FNG
					}
				}
			}
		}
		
		available = {
			AOG = {
				OR = {
					has_war_with = JAP
					has_capitulated = no
					NOT = {
						any_enemy_country = {
							custom_trigger_tooltip = {
								tooltip = AOG_china_tag
								is_chinese_tag = yes
							}
						}
					}
				}
				any_owned_state = {
					is_controlled_by = AOG
				}
			}
			GER = {
				OR = {
					has_war_with = JAP
					NOT = {
						any_enemy_country = {
							custom_trigger_tooltip = {
								tooltip = AOG_china_tag
								is_chinese_tag = yes
							}
						}
					}
				}
			}
			any_state = {
				owner = {
					is_in_faction_with = GER
				}
				OR = {
					is_claimed_by = QIE
					is_claimed_by = FNG
				}
			}
		}
		days_mission_timeout = 90
		is_good = no
		
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout JAP_fading_sun_mission"
			set_global_flag = JAP_fading_sun_fired
			if = {
				limit = { tag = GER }
				country_event = allgost.21
			}
			else = {
				effect_tooltip = {
					GER = { country_event = allgost.21 }
				}
			}
		}
	}
}

AOG_influence_QIE = { #ways to buy down german support or gain PP by selling out
	AOG_QIE_bribe_state_officials = { #lose PP, lose MarLib popularity
		icon = generic_flags
		fire_only_once = no
		days_re_enable = 50
		ai_will_do = { factor = 0 }
		cost = 50
		targets = { QIE }
		target_root_trigger = { has_active_mission = AOG_influence_QIE_timer }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision QIE_bribe_lobbyists"
			QIE = {
				add_popularity = {
					ideology = market_liberal
					popularity = 0.05
				}
				QIE_recalculate_peking_commission = yes
			}
		}
	}
	AOG_QIE_encourage_german_production = { #get spirit that lowers civ factory for 60 days, at end get drop in MarLib popularity
		icon = GFX_decision_generic_industry
		fire_only_once = no
		days_re_enable = 60
		targets = { QIE }
		target_root_trigger = { has_active_mission = AOG_influence_QIE_timer }
		ai_will_do = { factor = 0 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision QIE_encourage_domestic_production"
			QIE = {
				add_popularity = {
					ideology = market_liberal
					popularity = 0.08
				}
				add_timed_idea = {
					idea = AOG_QIE_encourage_german_production_idea2
					days = 60
				}
				QIE_recalculate_peking_commission = yes
			}
			add_timed_idea = {
				idea = AOG_QIE_encourage_german_production_idea
				days = 60
			}
		}
	}
	AOG_influence_QIE_timer = {
        icon = ger_mefo_bills
		allowed = { always = no } #manually activated
		available = { QIE = { market_liberal > 0.6 } }
		cancel_trigger = {
			QIE = {
				OR = {
					has_war_with = GER
					has_war_with = AOG
				}
				exists = no
			}
		}
        is_good = yes
		fire_only_once = yes
        days_mission_timeout = 465
		complete_effect = { #BOO
			log = "[GetDateText]: [Root.GetName]: Decision timeout BAT_duke_timer"
			effect_tooltip = {
				QIE = { get_current_government_type = yes }
				puppet = QIE
				QIE = { restore_previous_government_type = yes }
			}
			#country_event = KRBAT.31
		}
		timeout_effect = { #WINNER
			log = "[GetDateText] [Root.GetName]: decision BAT_defeat_brothers"
			effect_tooltip = {
				QIE = {
					PREV = { get_current_government_type = yes }
					puppet = PREV
					PREV = { restore_previous_government_type = yes }
				}
			}
			#country_event = KRBAT.41
		}
    }
}