UZB_smuggling_baron_category = {
	UZB_purchase_weapons_from_large = {
		icon = GFX_decision_give_cash
		
		available = {
			custom_trigger_tooltip = {
				tooltip = UZB_purchase_weapons_from_large_tooltip
				NOT = { has_country_flag = UZB_deal_cooldown }
			}
			NOT = { has_country_flag = UZB_deal_in_progress }
		}
		visible = {
			NOT = { has_country_flag = TRK_no_more_foreigners }
		}
		targets = { OTT PER }
		target_trigger = {
			FROM = {
				is_subject = no
				has_socialist_government = no
			}
		}
		custom_cost_trigger = {
			check_variable = { money_for_smuggling_available > 40 }
		}
		custom_cost_text = UZB_capital_50
		
		days_remove = 25
		days_re_enable = 40
		
		ai_will_do = {
			base = 100
		}
		cancel_effect = {
			clr_country_flag = UZB_deal_in_progress
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision UZB_purchase_weapons_from_large target: [From.GetName]"
			set_country_flag = { flag = UZB_deal_in_progress days = 15 value = 1 }
			add_to_variable = { money_for_smuggling_available = -50 }
			hidden_effect = {
				random_list = {
					25 = { set_country_flag = { flag = UZB_deal_cooldown days = 35 value = 1 } }
					25 = { set_country_flag = { flag = UZB_deal_cooldown days = 45 value = 1 } }
					25 = { set_country_flag = { flag = UZB_deal_cooldown days = 60 value = 1 } }
					25 = { set_country_flag = { flag = UZB_deal_cooldown days = 90 value = 1 } }
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove UZB_purchase_weapons_from_large target: [From.GetName]"
			clr_country_flag = UZB_deal_in_progress
			random_list = {
				75 = {
					effect_tooltip = {
						FROM = {
							send_equipment = { target = ROOT type = infantry_equipment amount = 2500 }
						}
					}
					country_event = khiva.13
					hidden_effect = {
						add_to_variable = { smuggled_arms_amount = 2500 }
					}
					if = {
						limit = {
							FROM = { tag = OTT }
						}
						custom_effect_tooltip = UZB_ottoman_influence_will_rise
						add_to_variable = { khiva_persian_influence = -1 }
						add_to_variable = { khiva_ottoman_influence = 1 }
					}
					else = {
						custom_effect_tooltip = UZB_persian_influence_will_rise
						add_to_variable = { khiva_persian_influence = 1 }
						add_to_variable = { khiva_ottoman_influence = -1 }
					}
				}
				25 = {
					modifier = {
						factor = 1.3
						has_idea = UZB_unruly_turkmens
					}
					modifier = {
						factor = 0.7
						has_idea = UZB_turkmens_suppressed
					}
					if = {
						limit = {
							FROM = { tag = PER }
							has_idea = UZB_unruly_turkmens
						}
						country_event = khiva.17
					}
					else = {
						country_event = khiva.14
					}
				}
			}			
		}
	}
	UZB_purchase_weapons_from_from = {
		icon = GFX_decision_give_cash
		
		available = {
			custom_trigger_tooltip = {
				tooltip = UZB_purchase_weapons_from_large_tooltip
				FROM = {
					has_equipment = { infantry_equipment > 99 }
				}
				NOT = { has_country_flag = UZB_deal_cooldown }
			}
			NOT = { has_country_flag = UZB_deal_in_progress }
		}
		targets = { RUS KLY MTR AZE }
		target_trigger = {
			FROM = {
				is_subject = no
				has_socialist_government = no
				has_stability < 0.5
				NOT = { has_country_flag = UZB_smuggling_blocked }
			}
		}
		
		custom_cost_trigger = {
			check_variable = { money_for_smuggling_available > 19 }
		}
		custom_cost_text = UZB_capital_20
		
		days_remove = 25
		days_re_enable = 40
		
		ai_will_do = {
			base = 100
		}
		cancel_effect = {
			clr_country_flag = UZB_deal_in_progress
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision UZB_purchase_weapons_from_from target: [From.GetName]"
			set_country_flag = { flag = UZB_deal_in_progress days = 15 value = 1 }
			hidden_effect = {
				random_list = {
					25 = { set_country_flag = { flag = UZB_deal_cooldown days = 35 value = 1 } }
					25 = { set_country_flag = { flag = UZB_deal_cooldown days = 45 value = 1 } }
					25 = { set_country_flag = { flag = UZB_deal_cooldown days = 60 value = 1 } }
					25 = { set_country_flag = { flag = UZB_deal_cooldown days = 90 value = 1 } }
				}
			}
			add_to_variable = { money_for_smuggling_available = -20 }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove UZB_purchase_weapons_from_from target: [From.GetName]"
			clr_country_flag = UZB_deal_in_progress
			random_list = {
				65 = {
					effect_tooltip = {
						FROM = {
							send_equipment = { target = ROOT type = infantry_equipment amount = 1000 }
						}
					}
					country_event = khiva.13
					hidden_effect = {
						add_to_variable = { smuggled_arms_amount = 1000 }
					}
				}
				35 = {
					if = {
						limit = {
							FROM = { tag = RUS }
						}
						FROM = { country_event = khiva.15 }
					}
					else = {
						country_event = khiva.14
					}
				}
			}			
		}
	}
	UZB_put_up_500_on_sale = {
		icon = GFX_decision_generic_prepare_civil_war
		
		available = {
			custom_trigger_tooltip = {
				tooltip = UZB_has_500_weapons
				check_variable = { smuggled_arms_amount > 499 }
			}
		}
		custom_cost_trigger = {
			check_variable = { smuggled_arms_amount > 499 }
		}
		custom_cost_text = UZB_rifle_500
		
		days_remove = 5
		days_re_enable = 5
		
		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				check_variable = { smuggled_arms_amount < 2499 }
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision UZB_put_up_500_on_sale target: [From.GetName]"
			add_to_variable = { smuggled_arms_amount = -500 }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove UZB_put_up_500_on_sale target: [From.GetName]"
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 500
				producer = ROOT
			}			
		}
	}
	UZB_sale_weapons_to_from = {
		icon = GFX_decision_cash_flow
		
		available = {
			custom_trigger_tooltip = {
				tooltip = UZB_has_500_weapons_sale
				check_variable = { smuggled_arms_amount > 499 }
			}
			NOT = { has_country_flag = UZB_deal_in_progress }
		}
		targets = { ALO AFG TRK KYR ETS MON TAJ }
		target_trigger = {
			FROM = {
				is_subject = no
				has_socialist_government = no
				has_stability < 0.5
				NOT = { has_country_flag = UZB_smuggling_blocked }
			}
		}
		custom_cost_trigger = {
			check_variable = { smuggled_arms_amount > 499 }
		}
		custom_cost_text = UZB_rifle_500
		
		days_remove = 15
		days_re_enable = 25
		
		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				check_variable = { smuggled_arms_amount > 2499 }
			}
		}
		cancel_effect = {
			clr_country_flag = UZB_deal_in_progress
		}		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision UZB_sale_weapons_to_from target: [From.GetName]"
			set_country_flag = { flag = UZB_deal_in_progress days = 15 value = 1 }
			add_to_variable = { smuggled_arms_amount = -500 }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove UZB_sale_weapons_to_from target: [From.GetName]"
			clr_country_flag = UZB_deal_in_progress
			random_list = {
				75 = {
					effect_tooltip = {
						send_equipment = { target = FROM type = infantry_equipment amount = 500 }
					}
					country_event = khiva.19
					random_list = {
						22 = { custom_effect_tooltip = UZB_will_receive_gold_equivalent_10 }
						28 = { custom_effect_tooltip = UZB_will_receive_gold_equivalent_15 }
						29 = { custom_effect_tooltip = UZB_will_receive_gold_equivalent_20 }
						21 = { custom_effect_tooltip = UZB_will_receive_gold_equivalent_33 }
					}
				}
				25 = {
					effect_tooltip = { country_event = khiva.20 }
					hidden_effect = { FROM = { country_event = khiva.18 } }
				}
			}			
		}
	}
	UZB_invest_money_in_civilian_factory = {
		icon = GFX_decision_generic_construction
		
		available = {
			custom_trigger_tooltip = {
				tooltip = UZB_has_35_capital
				check_variable = { money_for_smuggling_available > 34 }
			}
		}
		custom_cost_trigger = {
			check_variable = { money_for_smuggling_available > 34 }
		}
		custom_cost_text = UZB_capital_35
		
		days_remove = 70
		days_re_enable = 40
		
		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				check_variable = { money_for_smuggling_available > 69 }
			}
			modifier = {
				factor = 0
				check_variable = { smuggled_arms_amount < 1000 }
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision UZB_invest_money_in_civilian_factory target: [From.GetName]"
			add_to_variable = { money_for_smuggling_available = -35 }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove UZB_invest_money_in_civilian_factory target: [From.GetName]"
			random_owned_state = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}		
		}
	}
	UZB_invest_money_in_arms_factory = {
		icon = GFX_decision_generic_industry
		
		available = {
			custom_trigger_tooltip = {
				tooltip = UZB_has_35_capital
				check_variable = { money_for_smuggling_available > 34 }
			}
		}
		custom_cost_trigger = {
			check_variable = { money_for_smuggling_available > 34 }
		}
		custom_cost_text = UZB_capital_35
		
		days_remove = 70
		days_re_enable = 40
		
		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				check_variable = { money_for_smuggling_available > 69 }
			}
			modifier = {
				factor = 0
				check_variable = { smuggled_arms_amount < 1000 }
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision UZB_invest_money_in_arms_factory target: [From.GetName]"
			add_to_variable = { money_for_smuggling_available = -35 }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove UZB_invest_money_in_arms_factory target: [From.GetName]"
			random_owned_state = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}		
		}
	}
	UZB_invest_money_in_weapon_research = {
		icon = GFX_decision_generic_research
		
		available = {
			custom_trigger_tooltip = {
				tooltip = UZB_has_35_capital
				check_variable = { money_for_smuggling_available > 34 }
			}
		}
		custom_cost_trigger = {
			check_variable = { money_for_smuggling_available > 34 }
		}
		custom_cost_text = UZB_capital_35
		
		days_remove = 35
		days_re_enable = 40
		
		ai_will_do = {
			base = 85
			modifier = {
				factor = 0
				check_variable = { money_for_smuggling_available > 69 }
			}
			modifier = {
				factor = 0
				check_variable = { smuggled_arms_amount < 1000 }
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision UZB_invest_money_in_weapon_research target: [From.GetName]"
			add_to_variable = { money_for_smuggling_available = -35 }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove UZB_invest_money_in_weapon_research target: [From.GetName]"
			random_list = {
				50 = {
					add_tech_bonus = {
						name = UZB_invest_money_in_weapon_research
						bonus = 1
						uses = 1
						category = artillery
					}
				}
				20 = {
					add_tech_bonus = {
						name = UZB_invest_money_in_weapon_research
						bonus = 1
						uses = 1
						category = infantry_tech
					}
				}
				20 = {
					add_tech_bonus = {
						name = UZB_invest_money_in_weapon_research
						bonus = 1
						uses = 1
						category = infantry_weapons
					}
				}
				10 = {
					add_tech_bonus = {
						name = UZB_invest_money_in_weapon_research
						bonus = 1
						uses = 1
						category = support_tech
					}
				}
			}
		}
	}	
}
UZB_raids_category = {
	UZB_raid_country = {
		icon = GFX_decision_generic_ignite_civil_war
		
		available = {
			has_war = no
			FROM = { has_war = no }
			has_border_war = no
			is_owner_neighbor_of = FROM
		}
		targets = { PER ALO TRK TAJ UZB KYR AFG }
		target_trigger = {
			if = {
				limit = {
					FROM = {
						tag = PER
					}
					has_authoritarian_government = no
				}
			}
			else_if = {
				limit = {
					FROM = {
						tag = AFG
					}
					NOT = {
						has_country_leader = {
							name = "Habibullah Khan"
							ruling_only = yes
						}
					}
				}
			}
		}
		cost = 25
		days_remove = 25
		days_re_enable = 40
		
		ai_will_do = {
			base = 100
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision UZB_raid_country target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 30 value = 1 }
			setup_decision_attack_AI = yes
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove UZB_raid_country target: [From.GetName]"
			clear_decision_attack_AI = yes
			UZB_start_border_war = yes			
		}
	}
}